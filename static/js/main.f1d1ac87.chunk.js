(this.webpackJsonptable=this.webpackJsonptable||[]).push([[0],{14:function(e,t,n){e.exports=n.p+"static/media/ring.4c461beb.svg"},15:function(e,t,n){e.exports=n(42)},20:function(e,t,n){},21:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(13),o=n.n(r),l=(n(20),n(21),n(2)),u=n(3),i=n.n(u),s=Object(a.createContext)(),m=Object(a.createContext)(),d=Object(a.createContext)(),f=Object(a.createContext)(),b=function(e){var t=e.children,n=Object(a.useState)(!0),r=Object(l.a)(n,2),o=r[0],u=r[1],b=Object(a.useState)(!1),v=Object(l.a)(b,2),h=v[0],E=v[1],g=Object(a.useState)(!0),p=Object(l.a)(g,2),j=p[0],O=p[1],C=Object(a.useState)({}),y=Object(l.a)(C,2),w=y[0],k=y[1];Object(a.useEffect)((function(){i.a.get("https://recruitment.hal.skygate.io/companies").then((function(e){return u(!1),E(""),e.data})).then((function(e){return[I(e),e]})).then((function(e){P(e[0],e[1])})).catch((function(){u(!1),k(""),E(!0)}))}),[]);var I=function(e){return Object.values(e).map((function(e){return e.id}))},P=function(e,t){for(var n=t,a=new Date,c=a.getMonth()+1,r=a.getFullYear(),o=[],l=function(t){var a=e[t];o[t]=i.a.get("https://recruitment.hal.skygate.io/incomes/".concat(a)).then((function(e){if(e.data){var a=Object.values(e.data.incomes).reduce((function(e,t){return e+(t=parseFloat(t.value))}),0),o=a/12,l=Object.values(e.data.incomes).reduce((function(e,t){var n=new Date(t.date),a=n.getMonth()+1,o=n.getFullYear();return c-a===3&&r===o&&(e+=parseFloat(t.value)),e}),0);n[t].totalIncome=parseFloat(a.toFixed(2)),n[t].averageIncome=parseFloat(o.toFixed(2)),n[t].lastMonthIncome=parseFloat(l.toFixed(2))}})).catch((function(){E(!0)}))},u=0;u<=e.length-1;u++)l(u);Promise.all(o).then((function(){k(n),O(!1)}))};return c.a.createElement(d.Provider,{value:h},c.a.createElement(f.Provider,{value:j},c.a.createElement(s.Provider,{value:w},c.a.createElement(m.Provider,{value:o},t))))};n(39);var v=function(e){for(var t=e.rowsPerPage,n=e.totalRows,a=e.paginate,r=e.currentPage,o=[],l=1;l<=Math.ceil(n/t);l++)o.push(l);var u=function(e){return e===r?"active":void 0};return c.a.createElement("div",{className:"pagination"}," ",c.a.createElement("p",null,"Page:"),o.map((function(e){return c.a.createElement("a",{key:e,href:"javascript:;",onClick:function(){return a(e)},className:u(e)},e)})))},h=(n(40),n(14)),E=n.n(h);n(41);var g=function(e){var t=e.setFilterWord,n=e.setCurrentPage;return c.a.createElement("div",{className:"filtering"},c.a.createElement("p",null,"Filter your data here: "),c.a.createElement("input",{type:"text",placeholder:"",onChange:function(e){t(e.target.value),n(1)}}))};var p=function(){var e=Object(a.useContext)(s),t=Object(a.useContext)(d),n=Object(a.useContext)(f),r=Object(a.useState)(e),o=Object(l.a)(r,2),u=o[0],i=o[1],m=Object(a.useState)("ascending"),b=Object(l.a)(m,2),h=b[0],p=b[1],j=Object(a.useState)(null),O=Object(l.a)(j,2),C=O[0],y=O[1],w=Object(a.useState)(),k=Object(l.a)(w,2),I=k[0],P=k[1],x=Object(a.useState)(1),S=Object(l.a)(x,2),F=S[0],N=S[1],M=Object(a.useState)(20),L=Object(l.a)(M,1)[0],W=function(e){y(e);var t=u.slice().sort((function(t,n){return t[e]<n[e]?"ascending"===h?-1:1:t[e]>n[e]?"ascending"===h?1:-1:0}));i(t),p("ascending"===h?"descending":"ascending")},D=function(e){return e===C?h:void 0};return Object(a.useEffect)((function(){!function(e){var t=Object.values(e);t=t.filter((function(e){return-1!==e.id.toString().search(I.toLowerCase())||-1!==e.name.toLowerCase().search(I.toLowerCase())||-1!==e.city.toLowerCase().search(I.toLowerCase())||-1!==e.totalIncome.toString().search(I.toLowerCase())||-1!==e.averageIncome.toString().search(I.toLowerCase())||-1!==e.lastMonthIncome.toString().search(I.toLowerCase())})),i(t)}(e)}),[I]),Object(a.useEffect)((function(){e[0]&&i(e)}),[e]),t?c.a.createElement("div",null,c.a.createElement("p",null,"Retrieving data was unsuccessful. Check internet connection.")):n?c.a.createElement("div",null,c.a.createElement("img",{src:E.a,alt:"ball",height:"100px",width:"100px"}),c.a.createElement("p",null,"Preparing your data. Please wait.")):c.a.createElement(a.Fragment,null,c.a.createElement("div",{className:"tableContainer"},c.a.createElement("div",null,c.a.createElement(g,{setFilterWord:P,setCurrentPage:N}),c.a.createElement(v,{rowsPerPage:L,totalRows:e.length,paginate:function(e){return N(e)},currentPage:F})),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return W("id")},className:D("id")},"ID")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return W("name")},className:D("name")},"Name")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return W("city")},className:D("city")},"City")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return W("totalIncome")},className:D("totalIncome")},"Total Income")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return W("averageIncome")},className:D("averageIncome")},"Average Income")),c.a.createElement("th",null,c.a.createElement("button",{type:"button",onClick:function(){return W("lastMonthIncome")},className:D("lastMonthIncome")},"Last Month Income")))),c.a.createElement("tbody",null,function(){var e=F*L,t=e-L,n=u.slice(t,e);return Object.values(n).map((function(e){var t=e.id,n=e.name,a=e.city,r=e.totalIncome,o=e.averageIncome,l=e.lastMonthIncome;return c.a.createElement("tr",{key:"row ".concat(t)},c.a.createElement("td",{key:"".concat(t,".").concat(t)},t),c.a.createElement("td",{key:"".concat(t,".").concat(n)},n),c.a.createElement("td",{key:"".concat(t,".").concat(a)},a),c.a.createElement("td",{key:"".concat(t,".").concat(r)},r),c.a.createElement("td",{key:"".concat(t,".").concat(o)},o),c.a.createElement("td",{key:"".concat(t,".").concat(l)},l))}))}()))))};var j=function(){return c.a.createElement(b,null,c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"appHeader"},c.a.createElement("h1",null,"Table of data")),c.a.createElement(p,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.f1d1ac87.chunk.js.map